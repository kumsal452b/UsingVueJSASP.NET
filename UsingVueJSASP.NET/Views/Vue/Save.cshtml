@using Vue.Domain
@{
    ViewBag.Title = "Save";
    var theProduct = new Product();
}
<script src="~/Scripts/jquery-3.4.1.js"></script>
<script src="~/Scripts/jquery-3.4.1.min.js"></script>

<div class="container text-info">
    <div class="row">
        <div class="col-md-3"><label class="col-form-label text-right">Product Name</label></div>
        <div  class="col-md-4 offset-md-0 align-content-center"><input id="pname" class="shadow-sm form-control-sm d-md-flex flex-fill align-items-end align-content-center" type="text"></div>
    </div>
    <div class="row">
        <div class="col-md-3"><label class="col-form-label text-right">Date</label></div>
        <div  class="col-md-4 offset-md-0 align-content-center"><input id="date" type="date"></div>
    </div>
    <div class="row">
        <div class="col-md-3"><label class="col-form-label text-right">Piece</label></div>
        <div  class="col-md-4 offset-md-0 align-content-center"><input id="piece" class="shadow-sm form-control-sm flex-fill align-content-center" type="number"></div>
    </div>
    <div class="row">
        <div class="col-md-3"><label class="col-form-label text-right">Price</label></div>
        <div class="col-md-4 offset-md-0 align-content-center"><input  id="price" class="shadow-sm form-control-sm flex-fill align-content-center" type="number"></div>
    </div>
    <div class="row" id="app">
        <div class="col-md-3"><label class="col-form-label text-right"></label></div>
        <div class="col-md-4 offset-md-0 align-content-center">
        <button id="saveBtn" class="btn btn-success btn-block btn-lg text-uppercase shadow-lg" v-on:click="save" type="button">
            <span class="hide spinner-border text-warning text-right" role="status" id="spinner"></span>
            Request</button>
        </div>
    </div>
</div>
<script src="~/Scripts/vue.js"></script>
<script src="~/Scripts/vue.min.js"></script>
<script>
    var app = new Vue({
        el: "#app",
        data: {

        },
        methods: {
            save: function () {
                var button = $("#saveBtn");
                button.text("");
                $("#spinner").show();
                var pname = $("#pname");
                var price = $("#price");
                var piece = $("#piece");
                var date = $("#date").val();
                console.log($("#date").val());
                if (pname.val() == "" || price.val() == "" || piece.val() == "" || date == "" ) {
                    alert("Problem have been found ");
                    button.text("Request");
                    $("#spinner").hide();
                    return;
                }
                var theProduct = @Html.Raw(Json.Encode(theProduct));
                theProduct.name = pname.val();
                theProduct.Date = date;
                theProduct.price = price.val();
                theProduct.piece = piece.val();
                theProduct.User_Id = '@Model';

                $.get("@Url.Action("SaveToDb", "Vue")", theProduct, function (data, status, jqXHR) {


                })
            }
        },
        created: function () {
            console.log("problem solved")
            $("#spinner").hide("slow", function () {

            });
        }

    });

</script> 